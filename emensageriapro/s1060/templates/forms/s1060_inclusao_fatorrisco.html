<!-- eMensageriaPro - Sistema de Gerenciamento de Eventos do eSocial e EFD-Reinf<www.emensageria.com.br>Copyright (C) 2018 Marcelo Medeiros de Vasconcellos This program is free software: you can redistribute it and/or modify it under the terms of the GNU Affero General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version. This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero General Public License for more details. You should have received a copy of the GNU Affero General Public License along with this program. If not, see<https://www.gnu.org/licenses/>. Este programa é distribuído na esperança de que seja útil, mas SEM QUALQUER GARANTIA; sem mesmo a garantia implícita de COMERCIABILIDADE OU ADEQUAÇÃO A UM DETERMINADO FIM. Veja o Licença Pública Geral GNU Affero para mais detalhes. Este programa é software livre: você pode redistribuí-lo e / ou modificar sob os termos da licença GNU Affero General Public License como publicado pela Free Software Foundation, seja versão 3 do Licença, ou (a seu critério) qualquer versão posterior. Você deveria ter recebido uma cópia da Licença Pública Geral GNU Affero junto com este programa. Se não, veja<https://www.gnu.org/licenses/>.-->{% load templatetags %}{% if not s1060_inclusao_id or s1060_inclusao_id != s1060_inclusao_fatorrisco_form.s1060_inclusao.value %}<!-- inicio__s1060_inclusao_fatorrisco__s1060_inclusao --><div class="col-md-12" id="s1060_inclusao_fatorrisco__s1060_inclusao__div"><div class="form-group"><label id="s1060_inclusao_fatorrisco__s1060_inclusao__label">S-1060 - Inclusão de novas informações*<a data-toggle="tooltip" title="O registro apresenta o detalhamento do(s) fator(es) de risco(s) presente(s) no ambiente identificado."><i class="fa fa-fw fa-question-circle"></i></a></label>{% if not for_print %}{% if s1060_inclusao_fatorrisco_form.s1060_inclusao.value %}<a id="s1060_inclusao_fatorrisco__s1060_inclusao__div_acessar" href="{% url 's1060_inclusao_salvar' hash='{}'|json_id:s1060_inclusao_fatorrisco_form.s1060_inclusao.value|json_print:0|base64_encode_me %}">[Acessar]</a><script type="text/javascript">$(document).ready(function(){ $('#id_s1060_inclusao').change(function(){ document.getElementById("s1060_inclusao_fatorrisco__s1060_inclusao__div_acessar").style.display = 'none'; }); });</script>{% endif %} {% endif %} {% if s1060_inclusao_fatorrisco_form.s1060_inclusao.errors %}<div class="alert alert-error" style="margin-bottom: 0!important;width:100%">{{ s1060_inclusao_fatorrisco_form.s1060_inclusao.errors }}</div>{% endif %} {% if s1060_inclusao_fatorrisco_form.s1060_inclusao.field.widget.attrs.readonly %} {% if s1060_inclusao_fatorrisco_form.s1060_inclusao.field.widget.attrs.disabled %} {{ s1060_inclusao_fatorrisco_form.s1060_inclusao|addcss:'form-control' }}<input id="id_s1060_inclusao" name="s1060_inclusao" type="hidden" value="{{ s1060_inclusao_fatorrisco_form.s1060_inclusao.value }}">{% else %} {{ s1060_inclusao_fatorrisco_form.s1060_inclusao|addcss:'form-control' }} {% endif %} {% else %} {{ s1060_inclusao_fatorrisco_form.s1060_inclusao|addcss_select2:'form-control automate-select' }} {% endif %}</div></div><!-- fim__s1060_inclusao_fatorrisco__s1060_inclusao -->{% else %}<input type="hidden" value="{{ s1060_inclusao_id|valor }}" id="id_s1060_inclusao" name="s1060_inclusao">{% endif %}{% if not esocial_fatores_risco_id or esocial_fatores_risco_id != s1060_inclusao_fatorrisco_form.codfatris.value %}<!-- inicio__s1060_inclusao_fatorrisco__codfatris --><div class="col-md-6" id="s1060_inclusao_fatorrisco__codfatris__div"><div class="form-group"><label id="s1060_inclusao_fatorrisco__codfatris__label">Código do Fator de Risco*<a data-toggle="tooltip" title="Informar o código do fator de risco, conforme tabela 23. Validação: Deve ser um código existente na tabela 23."><i class="fa fa-fw fa-question-circle"></i></a></label>{% if s1060_inclusao_fatorrisco_form.codfatris.errors %}<div class="alert alert-error" style="margin-bottom: 0!important;width:100%">{{ s1060_inclusao_fatorrisco_form.codfatris.errors }}</div>{% endif %}<input type="text" id="txt_codfatris" name="txt_codfatris" class="form-control" value="{% if s1060_inclusao_fatorrisco.codfatris %}{{ s1060_inclusao_fatorrisco.codfatris }}{% endif %}" required="required"><input type="hidden" id="id_codfatris" name="codfatris" value="{% if s1060_inclusao_fatorrisco.codfatris %}{{ s1060_inclusao_fatorrisco_form.codfatris.value|valor }}{% endif %}"></div></div><script type="text/javascript">$(document).ready(function(e){ $('#txt_codfatris').autocomplete({ source: function (request, response) { $.getJSON("/esocial_fatores_risco/json-search/" + request.term + "/", function (data) { response($.map(data.esocial_fatores_risco, function (value, key) { return { label: value.value, value: value.key }; })); }); }, minLength: 3, select: function( e, ui ) { e.preventDefault(e); $(this).val(ui.item.label); $('#id_codfatris').val(ui.item.value); return false; }}); {% if '*<a data-toggle="tooltip" title="Informar o código do fator de risco, conforme tabela 23. Validação: Deve ser um código existente na tabela 23."><i class="fa fa-fw fa-question-circle"></i></a>' %} $("#id_form_s1060_inclusao_fatorrisco").submit(function(e) { $('#txt_codfatris').disabled = true; if ($('#id_codfatris').val() == "") { $('#txt_codfatris').val(""); alert('Formulário não pode ser salvo sem selecionar o(a) campo Código do Fator de Risco!'); e.preventDefault(e); }; }); {% endif %}});</script><!-- fim__s1060_inclusao_fatorrisco__codfatris -->{% else %}<input type="hidden" value="{{ esocial_fatores_risco_id|valor }}" id="id_codfatris" name="codfatris">{% endif %}